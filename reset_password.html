<!DOCTYPE html>
<html>
<head>
  <title>Reset Password</title>
</head>
<body>

<form id="reset-password">
  <label for="password">
    Password
    <input type="password" name="password">
  </label>

  <button type="submit">Set New Password</button>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
  $('#reset-password').submit(function(e) {
    e.preventDefault();
    var form = $('#reset-password');
    var serializedForm = form.serializeArray();
    var formValues = {}

    serializedForm.forEach(function(obj) {
      formValues[obj.name] = obj.value;
    })

    formValues.api_key = 'NHbeZ8QT78RlHK3KjZshVgfjVNybibVD2AzoDlnl1Teee8bW6UIBm5tMUJrF6UQf'

    const urlParams = new URLSearchParams(window.location.search)
    formValues.password_token = urlParams.get('password_token')
    // formValues.api_key = '00PKkT7e3hT0oNj9FBxf4Um9Qm96wqnZsQf5-QniEIZnHBuJNTXWgDAR70VHoIkT'
    // formValues.password = 'password'
    // formValues.password_token = '787VlFG5eDGIaGvoQK7ZW0A7DuSiSfza-UL-ipW7yPqVUUAd7L1X9LrzSwaLUVRI'
    console.log(formValues)
    submitForm(formValues)
  })
  
  function submitForm(data) {
    $.ajax({
      type: 'PUT',
      url: 'https://api-core-3958.stage.zy.pe/consumers/reset_password',
      data: data,
      dataType: 'html'
    }).done(function(res) {
      console.log('success')
    })
    .fail(function(err) {
      console.log('err', err)
    })
  }
</script>
</body>
</html>